{"componentChunkName":"component---src-templates-blog-post-js","path":"/not-understand-nvm/","result":{"data":{"site":{"siteMetadata":{"title":"What I Thought","description":"@keensyoのブログです。"}},"markdownRemark":{"id":"5784e4a7-3d16-5d4c-908c-cf291bce9b49","excerpt":"と思ったのだけれど、できなかった。\n結局再度 nvm で node.js をインストールしなおして解消した。\n何を試したか整理しておく。 ことのはじまり 修正が入った React プロジェクトのローカルサーバーを起動しようとしたところ、以下と似たエラーが起きた。\nError when trying to install…","html":"<p>と思ったのだけれど、できなかった。</br>\n結局再度 nvm で node.js をインストールしなおして解消した。\n何を試したか整理しておく。</br></p>\n<h2>ことのはじまり</h2>\n<p>修正が入った React プロジェクトのローカルサーバーを起動しようとしたところ、以下と似たエラーが起きた。</br>\n<a href=\"https://stackoverflow.com/questions/64529958/error-when-trying-to-install-react-redux-dependency\">Error when trying to install react-redux dependency</a>\nnpm のバージョンが 7 以降だからうまくいってないんじゃないか？ということだったので、手元の npm のバージョンを確認してみた。</br>\nすると、インストールして使っている node とそれに推奨されている npm とでバージョンに差異があり、かつ npm が 7 系ということがわかった。</br></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">xxx:/Users/xxx <span class=\"token function\">npm</span> version\n<span class=\"token punctuation\">{</span>\n  npm: <span class=\"token string\">'7.24.0'</span>,\n  node: <span class=\"token string\">'14.17.6'</span>,\n  v8: <span class=\"token string\">'8.4.371.23-node.76'</span>,\n  uv: <span class=\"token string\">'1.41.0'</span>,\n  zlib: <span class=\"token string\">'1.2.11'</span>,\n  brotli: <span class=\"token string\">'1.0.9'</span>,\n  ares: <span class=\"token string\">'1.17.2'</span>,\n  modules: <span class=\"token string\">'83'</span>,\n  nghttp2: <span class=\"token string\">'1.42.0'</span>,\n  napi: <span class=\"token string\">'8'</span>,\n  llhttp: <span class=\"token string\">'2.1.3'</span>,\n  openssl: <span class=\"token string\">'1.1.1l'</span>,\n  cldr: <span class=\"token string\">'39.0'</span>,\n  icu: <span class=\"token string\">'69.1'</span>,\n  tz: <span class=\"token string\">'2021a'</span>,\n  unicode: <span class=\"token string\">'13.0'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>本来、node.js が 14.17.6 に対し、npm は 6.14.15 が同梱される。</br>\nので、6.14.15 にバージョンを下げたい。</br></p>\n<h3>nvm のコマンドを調べる</h3>\n<p>nvm —あで nvm のコマンドがわかるので、確認した。</br>\n見たところ、install コマンドやそのオプションなど、あまり複雑なことはできないようだった。</br>\nnvm version で出力されるのは 14.17.6。</br>\nnvm list だと、14.16.1 と 14.17.1 が入っていたので、あまり意味は無さそうと思いながら nvm uninstall [version]で 14.17.6 以外を削除。</br></p>\n<h3>npm のコマンドを調べる</h3>\n<p>nvm がダメなら npm はどうだろう、ということで npm help でコマンドを確認。</br>\nこっちも install や状態確認などのコマンドが多く、ほしいコマンドを見つけられなかった。</br>\n7 系が入っているので、とりあえず 6 系を入れようと npm install npm@6.14.15を実行した。</br>\nついでに 7 系の uninstall も実行。</br></p>\n<h3>nvm で再インストール</h3>\n<p>結構ググってみたが、そもそもこういった事象の人はあまりいない？ようで、</br>\nnpm ないし nvm 経由でインストールする方法を解説する記事にたどり着くだけだった。</br>\nお手上げになってしまったので、nvm で再インストールを実施した。</br></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">nvm use system  <span class=\"token comment\">#いま使っている14.17.6をuninstallするため</span>\nnvm uninstall <span class=\"token number\">14.17</span>.6\nnvm <span class=\"token function\">ls</span>  <span class=\"token comment\">#きちんとuninstallできているか確認</span>\nnvm <span class=\"token function\">install</span> --lts\nnvm use <span class=\"token number\">14.17</span>.6</code></pre></div>\n<h3>おわりに</h3>\n<p>本当に npm そのものの切り替えはできないのか、知見がほしい…</p>","frontmatter":{"title":"nvmでインストールしたNode.jsに同梱されるnpmのバージョンを変更したい","date":"September 24, 2021"}},"previous":{"fields":{"slug":"/the-latest-activities/"},"frontmatter":{"title":"最近のこと"}},"next":null},"pageContext":{"id":"5784e4a7-3d16-5d4c-908c-cf291bce9b49","previousPostId":"a5d05315-3dac-5cb2-a5e9-bf794a97477e","nextPostId":null}},"staticQueryHashes":["2841359383"]}